<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="theme-color" content="#ffffff" />
    <title>fs. — Полная версия на A-Frame</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

    <!-- HTML Shader (для отображения iframe) -->
    <script src="https://unpkg.com/aframe-html-shader@1.0.0/dist/aframe-html-shader.min.js"></script>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background-color: #fff;
        overflow: hidden;
        user-select: none;
      }

      a-scene {
        width: 100%;
        height: 100%;
      }

      .embedded-frame {
        border: none;
        width: 480px;
        height: 360px;
      }

      #blocker {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
        background: transparent;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div id="blocker"></div>

    <a-scene background="color: #ffffff">
      <!-- Камера + управление -->
      <a-entity
        id="cameraRig"
        position="0 1.6 6"
        orbit-controls="
          target: 0 1.5 0;
          enableDamping: true;
          dampingFactor: 0.05;
          rotateSpeed: 0.3;
          enableZoom: true;
          autoRotate: true;
          autoRotateSpeed: 0.5;
        "
      >
        <a-camera></a-camera>
      </a-entity>

      <!-- Группа с виджетами -->
      <a-entity id="widgets" position="0 1.5 0">
        <!-- Telegram -->
        <a-entity
          geometry="primitive: plane; width: 4.8; height: 1.5"
          material="shader: html; target: #iframe1"
          position="0 0 -2.4"
        ></a-entity>

        <!-- YouTube -->
        <a-entity
          geometry="primitive: plane; width: 4.8; height: 3.6"
          material="shader: html; target: #iframe2"
          rotation="0 -90 0"
          position="2.4 0 0"
        ></a-entity>

        <!-- Telegram (2) -->
        <a-entity
          geometry="primitive: plane; width: 4.8; height: 3.6"
          material="shader: html; target: #iframe3"
          rotation="0 180 0"
          position="0 0 2.4"
        ></a-entity>

        <!-- VK Video -->
        <a-entity
          geometry="primitive: plane; width: 4.8; height: 3.6"
          material="shader: html; target: #iframe4"
          rotation="0 90 0"
          position="-2.4 0 0"
        ></a-entity>
      </a-entity>
    </a-scene>

    <!-- скрытые iframe -->
    <div style="display:none">
      <iframe
        id="iframe1"
        class="embedded-frame"
        src="https://t.me/f_channel_tg/22?embed=true"
      ></iframe>

      <iframe
        id="iframe2"
        class="embedded-frame"
        src="https://www.youtube.com/embed/Y2-xZ-1HE-Q?rel=0"
      ></iframe>

      <iframe
        id="iframe3"
        class="embedded-frame"
        src="https://telesco.pe/embed/f_channel_tg/23"
      ></iframe>

      <iframe
        id="iframe4"
        class="embedded-frame"
        src="https://vkvideo.ru/video_ext.php?oid=276014824&id=456239069&hash=d4e4176bd8472af1"
      ></iframe>
    </div>

    <!-- Подключаем Orbit Controls для A-Frame -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-orbit-controls-component@1.3.2/dist/aframe-orbit-controls-component.min.js"></script>

    <script>
      // блокировка iframe при вращении
      const scene = document.querySelector("a-scene");
      const blocker = document.getElementById("blocker");
      const cameraRig = document.querySelector("#cameraRig");

      let rotating = false;

      scene.addEventListener("mousedown", () => {
        rotating = true;
        blocker.style.display = "block";
      });

      scene.addEventListener("mouseup", () => {
        rotating = false;
        blocker.style.display = "none";
      });

      scene.addEventListener("touchstart", () => {
        rotating = true;
        blocker.style.display = "block";
      });

      scene.addEventListener("touchend", () => {
        rotating = false;
        blocker.style.display = "none";
      });

      // Адаптивность — обновляем при изменении окна
      window.addEventListener("resize", () => {
        const canvas = scene.canvas;
        if (canvas) {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
      });
    </script>
  </body>
</html>